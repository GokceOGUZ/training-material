{"layout":"tutorial_hands_on","subtopic":"datamanipulation","priority":2,"title":"Importing files from public atlases","questions":["How do I use the EBI Single Cell Expression Atlas and Human Cell Atlas?","How can I reformat and manipulate the downloaded files to create the correct input for downstream analysis?"],"objectives":["You will retrieve raw data from the EBI Single Cell Expression Atlas and Human Cell Atlas.","You will manipulate the metadata and matrix files.","You will combine the metadata and matrix files into an AnnData or Seurat object for downstream analysis."],"time_estimation":"15m","key_points":["The EMBL-EBI Single-cell Expression Atlas contains high quality datasets.","Metadata manipulation is key for generating the correctly formatted files.","To use Scanpy tools, you have to transform your metadata into an AnnData object.","To use Seurat tools, you have to transform your metadata into a Seurat object."],"contributions":{"authorship":["wee-snufkin","nomadscientist"],"funding":["elixir-fair-data"]},"requirements":[{"type":"internal","topic_name":"single-cell","tutorials":["scrna-case_alevin","scrna-case_alevin-combine-datasets"]}],"follow_up_training":[{"type":"internal","topic_name":"single-cell","tutorials":["scrna-case_basic-pipeline"]}],"tags":["data import","data management"],"js_requirements":{"mathjax":null,"mermaid":false},"short_id":"T00374","url":"/topics/single-cell/tutorials/EBI-retrieval/tutorial.html","topic_name":"single-cell","tutorial_name":"EBI-retrieval","dir":"topics/single-cell/tutorials/EBI-retrieval","symlink":null,"id":"single-cell/EBI-retrieval","hands_on":true,"slides":false,"mod_date":"2023-12-15 13:30:34 +0000","pub_date":"2023-11-14 17:16:58 +0000","version":29,"workflows":[{"workflow":"EBI-SCXA-to-AnnData-(Scanpy)-or-Seurat-Object.ga","tests":true,"url":"https://training.galaxyproject.org/training-material/topics/single-cell/tutorials/EBI-retrieval/workflows/EBI-SCXA-to-AnnData-(Scanpy)-or-Seurat-Object.ga","url_html":"https://training.galaxyproject.org/training-material/topics/single-cell/tutorials/EBI-retrieval/workflows/EBI-SCXA-to-AnnData-(Scanpy)-or-Seurat-Object.html","path":"topics/single-cell/tutorials/EBI-retrieval/workflows/EBI-SCXA-to-AnnData-(Scanpy)-or-Seurat-Object.ga","wfid":"single-cell-EBI-retrieval","wfname":"ebi-scxa-to-anndata--scanpy--or-seurat-object","trs_endpoint":"https://training.galaxyproject.org/training-material/api/ga4gh/trs/v2/tools/single-cell-EBI-retrieval/versions/ebi-scxa-to-anndata--scanpy--or-seurat-object","license":"CC-BY-4.0","parent_id":"single-cell/EBI-retrieval","topic_id":"single-cell","tutorial_id":"EBI-retrieval","creators":[{"class":"Person","identifier":"0009-0001-2017-8805","name":"Julia Jakiela"}],"name":"EBI SCXA to AnnData (Scanpy) or Seurat Object","title":"EBI SCXA to AnnData (Scanpy) or Seurat Object","version":2,"description":"Creates input file for Filter, Plot, Explore tutorial","tags":[],"features":{"report":null,"subworkflows":false,"comments":false,"parameters":true},"workflowhub_id":"1210","history":[{"hash":"a6e3cf848bad2cf19f48ca286c52821f558a6b52","unix":"1702552191","message":"new tests","short_hash":"a6e3cf848","num":2},{"hash":"914bf924a609d64b3f3f69d8b78b44a584d90581","unix":"1702547068","message":"ebi scxa updated workflow tests","short_hash":"914bf924a","num":1}],"test_results":null,"modified":"2024-07-15 00:05:41 +0000","mermaid":"flowchart TD\n  0[\"ℹ️ Input Parameter\\nSC-Atlas experiment accession\"];\n  style 0 fill:#ded,stroke:#393,stroke-width:4px;\n  1[\"EBI SCXA Data Retrieval\"];\n  0 -->|output| 1;\n  2[\"Rename batch numbers\"];\n  1 -->|design_tsv| 2;\n  3[\"Mito genes check\"];\n  1 -->|genes_tsv| 3;\n  b0762cfd-58bd-4c39-ae41-2dca4289c541[\"Output\\nMito genes check\"];\n  3 --> b0762cfd-58bd-4c39-ae41-2dca4289c541;\n  style b0762cfd-58bd-4c39-ae41-2dca4289c541 stroke:#2c3143,stroke-width:4px;\n  4[\"Rename cell metadata headers\"];\n  2 -->|out_file1| 4;\n  5[\"Create AnnData\"];\n  1 -->|barcode_tsv| 5;\n  4 -->|outfile| 5;\n  1 -->|genes_tsv| 5;\n  1 -->|matrix_mtx| 5;\n  938cd594-61cf-4037-a58b-c09c065db505[\"Output\\nAnnData object\"];\n  5 --> 938cd594-61cf-4037-a58b-c09c065db505;\n  style 938cd594-61cf-4037-a58b-c09c065db505 stroke:#2c3143,stroke-width:4px;\n  6[\"Seurat Read10x\"];\n  1 -->|barcode_tsv| 6;\n  1 -->|genes_tsv| 6;\n  1 -->|matrix_mtx| 6;\n  4 -->|outfile| 6;\n  c24e9d83-c175-40a2-9c36-eeb486fe323e[\"Output\\nSeurat object\"];\n  6 --> c24e9d83-c175-40a2-9c36-eeb486fe323e;\n  style c24e9d83-c175-40a2-9c36-eeb486fe323e stroke:#2c3143,stroke-width:4px;\n  7[\"AnnData Operations\"];\n  5 -->|output_h5ad| 7;\n  b47f801f-bedb-4136-a5e9-378a815a1799[\"Output\\nMito-counted AnnData for downstream analysis\"];\n  7 --> b47f801f-bedb-4136-a5e9-378a815a1799;\n  style b47f801f-bedb-4136-a5e9-378a815a1799 stroke:#2c3143,stroke-width:4px;","graph_dot":"digraph main {\n  node [fontname=\"Atkinson Hyperlegible\", shape=box, color=white,style=filled,color=peachpuff,margin=\"0.2,0.2\"];\n  edge [fontname=\"Atkinson Hyperlegible\"];\n  0[color=lightgreen,label=\"ℹ️ Input Parameter\\nSC-Atlas experiment accession\"]\n  1[label=\"EBI SCXA Data Retrieval\"]\n  0 -> 1 [label=\"output\"]\n  2[label=\"Rename batch numbers\"]\n  1 -> 2 [label=\"design_tsv\"]\n  3[label=\"Mito genes check\"]\n  1 -> 3 [label=\"genes_tsv\"]\n  kb0762cfd58bd4c39ae412dca4289c541[color=lightseagreen,label=\"Output\\nMito genes check\"]\n  3 -> kb0762cfd58bd4c39ae412dca4289c541\n  4[label=\"Rename cell metadata headers\"]\n  2 -> 4 [label=\"out_file1\"]\n  5[label=\"Create AnnData\"]\n  1 -> 5 [label=\"barcode_tsv\"]\n  4 -> 5 [label=\"outfile\"]\n  1 -> 5 [label=\"genes_tsv\"]\n  1 -> 5 [label=\"matrix_mtx\"]\n  k938cd59461cf4037a58bc09c065db505[color=lightseagreen,label=\"Output\\nAnnData object\"]\n  5 -> k938cd59461cf4037a58bc09c065db505\n  6[label=\"Seurat Read10x\"]\n  1 -> 6 [label=\"barcode_tsv\"]\n  1 -> 6 [label=\"genes_tsv\"]\n  1 -> 6 [label=\"matrix_mtx\"]\n  4 -> 6 [label=\"outfile\"]\n  kc24e9d83c17540a29c36eeb486fe323e[color=lightseagreen,label=\"Output\\nSeurat object\"]\n  6 -> kc24e9d83c17540a29c36eeb486fe323e\n  7[label=\"AnnData Operations\"]\n  5 -> 7 [label=\"output_h5ad\"]\n  kb47f801fbedb4136a5e9378a815a1799[color=lightseagreen,label=\"Output\\nMito-counted AnnData for downstream analysis\"]\n  7 -> kb47f801fbedb4136a5e9378a815a1799\n}","workflow_tools":["toolshed.g2.bx.psu.edu/repos/ebi-gxa/retrieve_scxa/retrieve_scxa/v0.0.2+galaxy2","toolshed.g2.bx.psu.edu/repos/galaxyp/regex_find_replace/regexColumn1/1.0.3","toolshed.g2.bx.psu.edu/repos/bgruening/text_processing/tp_grep_tool/1.1.1","toolshed.g2.bx.psu.edu/repos/bgruening/text_processing/tp_find_and_replace/1.1.4","toolshed.g2.bx.psu.edu/repos/ebi-gxa/scanpy_read_10x/scanpy_read_10x/1.8.1+galaxy9","toolshed.g2.bx.psu.edu/repos/ebi-gxa/seurat_read10x/seurat_read10x/3.2.3+galaxy0","toolshed.g2.bx.psu.edu/repos/ebi-gxa/anndata_ops/anndata_ops/1.8.1+galaxy92"]}],"api":"https://training.galaxyproject.org/training-material/api/topics/single-cell/tutorials/EBI-retrieval/tutorial.json","tools":["toolshed.g2.bx.psu.edu/repos/bgruening/text_processing/tp_find_and_replace/1.1.4","toolshed.g2.bx.psu.edu/repos/bgruening/text_processing/tp_grep_tool/1.1.1","toolshed.g2.bx.psu.edu/repos/ebi-gxa/anndata_ops/anndata_ops/1.8.1+galaxy92","toolshed.g2.bx.psu.edu/repos/ebi-gxa/hca_matrix_downloader/hca_matrix_downloader/v0.0.4+galaxy0","toolshed.g2.bx.psu.edu/repos/ebi-gxa/retrieve_scxa/retrieve_scxa/v0.0.2+galaxy2","toolshed.g2.bx.psu.edu/repos/ebi-gxa/scanpy_read_10x/scanpy_read_10x/1.8.1+galaxy0","toolshed.g2.bx.psu.edu/repos/ebi-gxa/scanpy_read_10x/scanpy_read_10x/1.8.1+galaxy9","toolshed.g2.bx.psu.edu/repos/ebi-gxa/seurat_read10x/seurat_read10x/3.2.3+galaxy0","toolshed.g2.bx.psu.edu/repos/galaxyp/regex_find_replace/regexColumn1/1.0.3","toolshed.g2.bx.psu.edu/repos/iuc/sceasy_convert/sceasy_convert/0.0.7+galaxy1"],"supported_servers":{"exact":[{"url":"https://usegalaxy.eu","name":"UseGalaxy.eu","usegalaxy":true}],"inexact":[]},"topic_name_human":"Single Cell","admin_install":{"install_tool_dependencies":true,"install_repository_dependencies":true,"install_resolver_dependencies":true,"tools":[{"name":"text_processing","owner":"bgruening","revisions":"d698c222f354","tool_panel_section_label":"Text Manipulation","tool_shed_url":"https://toolshed.g2.bx.psu.edu/"},{"name":"text_processing","owner":"bgruening","revisions":"d698c222f354","tool_panel_section_label":"Text Manipulation","tool_shed_url":"https://toolshed.g2.bx.psu.edu/"},{"name":"anndata_ops","owner":"ebi-gxa","revisions":"a0274bc43b7e","tool_panel_section_label":"Single-cell","tool_shed_url":"https://toolshed.g2.bx.psu.edu/"},{"name":"hca_matrix_downloader","owner":"ebi-gxa","revisions":"c3c85b67d118","tool_panel_section_label":"Single Cell","tool_shed_url":"https://toolshed.g2.bx.psu.edu/"},{"name":"retrieve_scxa","owner":"ebi-gxa","revisions":"72b6e1747e37","tool_panel_section_label":"Single-cell","tool_shed_url":"https://toolshed.g2.bx.psu.edu/"},{"name":"scanpy_read_10x","owner":"ebi-gxa","revisions":"d253d69ff19f","tool_panel_section_label":"Single-cell","tool_shed_url":"https://toolshed.g2.bx.psu.edu/"},{"name":"scanpy_read_10x","owner":"ebi-gxa","revisions":"9afcfcd1d215","tool_panel_section_label":"Single-cell","tool_shed_url":"https://toolshed.g2.bx.psu.edu/"},{"name":"seurat_read10x","owner":"ebi-gxa","revisions":"301cf1b4b43d","tool_panel_section_label":"Seurat","tool_shed_url":"https://toolshed.g2.bx.psu.edu/"},{"name":"regex_find_replace","owner":"galaxyp","revisions":"503bcd6ebe4b","tool_panel_section_label":"Text Manipulation","tool_shed_url":"https://toolshed.g2.bx.psu.edu/"},{"name":"sceasy_convert","owner":"iuc","revisions":"d70139524747","tool_panel_section_label":"Single-cell","tool_shed_url":"https://toolshed.g2.bx.psu.edu/"}]},"admin_install_yaml":"---\ninstall_tool_dependencies: true\ninstall_repository_dependencies: true\ninstall_resolver_dependencies: true\ntools:\n- name: text_processing\n  owner: bgruening\n  revisions: d698c222f354\n  tool_panel_section_label: Text Manipulation\n  tool_shed_url: https://toolshed.g2.bx.psu.edu/\n- name: text_processing\n  owner: bgruening\n  revisions: d698c222f354\n  tool_panel_section_label: Text Manipulation\n  tool_shed_url: https://toolshed.g2.bx.psu.edu/\n- name: anndata_ops\n  owner: ebi-gxa\n  revisions: a0274bc43b7e\n  tool_panel_section_label: Single-cell\n  tool_shed_url: https://toolshed.g2.bx.psu.edu/\n- name: hca_matrix_downloader\n  owner: ebi-gxa\n  revisions: c3c85b67d118\n  tool_panel_section_label: Single Cell\n  tool_shed_url: https://toolshed.g2.bx.psu.edu/\n- name: retrieve_scxa\n  owner: ebi-gxa\n  revisions: 72b6e1747e37\n  tool_panel_section_label: Single-cell\n  tool_shed_url: https://toolshed.g2.bx.psu.edu/\n- name: scanpy_read_10x\n  owner: ebi-gxa\n  revisions: d253d69ff19f\n  tool_panel_section_label: Single-cell\n  tool_shed_url: https://toolshed.g2.bx.psu.edu/\n- name: scanpy_read_10x\n  owner: ebi-gxa\n  revisions: 9afcfcd1d215\n  tool_panel_section_label: Single-cell\n  tool_shed_url: https://toolshed.g2.bx.psu.edu/\n- name: seurat_read10x\n  owner: ebi-gxa\n  revisions: 301cf1b4b43d\n  tool_panel_section_label: Seurat\n  tool_shed_url: https://toolshed.g2.bx.psu.edu/\n- name: regex_find_replace\n  owner: galaxyp\n  revisions: 503bcd6ebe4b\n  tool_panel_section_label: Text Manipulation\n  tool_shed_url: https://toolshed.g2.bx.psu.edu/\n- name: sceasy_convert\n  owner: iuc\n  revisions: d70139524747\n  tool_panel_section_label: Single-cell\n  tool_shed_url: https://toolshed.g2.bx.psu.edu/\n","tours":false,"video":false,"slides_recordings":false,"translations":{"tutorial":[],"slides":[],"video":false},"license":"CC-BY-4.0","type":"tutorial","contributors":[{"name":"Julia Jakiela","email":"juliajot36@gmail.com","joined":"2022-06","id":"wee-snufkin","url":"https://training.galaxyproject.org/training-material/api/contributors/wee-snufkin.json","page":"https://training.galaxyproject.org/training-material/hall-of-fame/wee-snufkin/"},{"name":"Wendi Bacon","email":"wendi.bacon@open.ac.uk","twitter":"WendiBacon1","matrix":"nomadscientist:matrix.org","joined":"2020-03","elixir_node":"uk","orcid":"0000-0002-8170-8806","bio":"Senior Lecturer at The Open University","fediverse":"https://mstdn.science/@wendibacon1","fediverse_flavor":"mastodon","affiliations":["elixir-europe"],"id":"nomadscientist","url":"https://training.galaxyproject.org/training-material/api/contributors/nomadscientist.json","page":"https://training.galaxyproject.org/training-material/hall-of-fame/nomadscientist/"},{"name":"ELIXIR-UK: FAIR Data Stewardship training","short_name":"ELIXIR Fair Data","github":false,"joined":"2023-06","funder":true,"funding_id":"MR/V038966/1","funding_system":"ukri","funding_statement":"This work has been funded by the ELIXIR-UK FAIR Data Stewardship training UKRI award (MR/V038966/1)","id":"elixir-fair-data","url":"https://training.galaxyproject.org/training-material/api/funders/elixir-fair-data.json","page":"https://training.galaxyproject.org/training-material/hall-of-fame/elixir-fair-data/"}]}